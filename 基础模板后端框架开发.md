# 基础模板后端框架开发

## 项目设计

1. 需求分析
2. 数据库设计
3. 基础 API 接口设计

## 技术栈

1. 项目为前后端分离项目
2. 前端分别使用vue, angularjs, reactjs各开发一套，第一套采用 vue
3. 后端使用 php laravel框架，数据库使用 mysql，redis
4. 服务器搭建使用 larave-docker 部署

## 需求分析

### 第一阶段

1. 主要是实现后台的一些基础功能，包括，用户管理，目录树管理，以及权限管理。
2. 主要是对列表的增删改查做一个快速生成功能，用户通过对 model 的编辑快速生成新的功能模块的增删改查的前后端代码实现快速生成。

### 第二阶段

1. 实现在页面上编辑 model 来通过事件触发生成命令

## 数据库设计

### 表目录

1. t_admin 管理员表
2. t_role 角色表
3. t_role_admin 角色管理员关联表
4. t_menu 菜单表
5. t_role_menu 角色菜单权限关联表
6. t_user 用户表
7. t_api  接口表
8. t_role_api 接口权限关联表

### 设计表

#### base_table 表统一字段

| 字段名     | 类型        | 必填 | 备注                          |
| ---------- | ----------- | ---- | ----------------------------- |
| flag       | int         | 是   | 是否可用(0,1)（软删除时使用） |
| created_at | varchar(11) | 是   | 创建时间                      |
| updated_at | varchar(11) | 是   | 更新时间                      |
| deleted_at | varchar(11) | 是   | 删除时间（软删除时使用）      |

#### t_admin 管理员表

| 字段名            | 类型         | 必填 | 备注         |
| ----------------- | ------------ | ---- | ------------ |
| id                | int(10)      | 是   | 主键         |
| account           | varchar(100) | 是   | 账号         |
| password          | varchar(100) | 是   | 密码         |
| api_token         | text         | 否   | 验证token    |
| email             | varchar(50)  | 是   | 邮箱         |
| email_verified_at | timestamp    | 否   | 邮箱验证时间 |
| path              | text         | 是   | 物化节点路径 |
| pid               | int(10)      | 是   | 父id         |

#### t_menu 菜单表

| 字段名       | 类型         | 必填 | 备注             |
| ------------ | ------------ | ---- | ---------------- |
| mid          | int(10)      | 是   | 主键             |
| name         | varchar(100) | 是   | 菜单名称         |
| url          | varchar(255) | 是   | 菜单url          |
| pid          | int(10)      | 是   | 父级菜单id       |
| is_ resource | int          | 是   | 是否创建资源管理 |
| seq          | int(10)      | 是   | 排序值           |

#### t_role 角色表

| 字段名 | 类型         | 必填 | 备注     |
| ------ | ------------ | ---- | -------- |
| rid    | int(10)      | 是   | 主键     |
| name   | varchar(100) | 是   | 角色名称 |

#### t_role_admin 管理员角色关联表

| 字段名 | 类型    | 必填 | 备注             |
| ------ | ------- | ---- | ---------------- |
| raid   | int(10) | 是   | 主键             |
| rid    | int(10) | 是   | 角色表关联主键   |
| aid    | int(10) | 是   | 管理员表关联主键 |

#### t_role_menu 菜单角色关联表

| 字段名 | 类型    | 必填 | 备注           |
| ------ | ------- | ---- | -------------- |
| rmid   | int(10) | 是   | 主键           |
| rid    | int(10) | 是   | 角色表关联主键 |
| mid    | int(10) | 是   | 菜单关联主键   |

#### t_act 操作表

| 字段名     | 类型         | 必填 | 备注                  |
| ---------- | ------------ | ---- | --------------------- |
| actid      | int(10)      | 是   | 主键                  |
| name       | varchar(50)  | 是   | 操作名称              |
| icon_class | varchar(255) | 是   | 按钮样式              |
| info       | varchar(100) | 否   | 描述                  |
| is_public  | int          | 是   | 是否公开              |
| layout     | int          | 是   | 布局位置0:top,1:right |
| ordernum   | int(10)      | 是   | 排序                  |

#### t_api 接口表

| 字段名   | 类型         | 必填 | 备注                             |
| -------- | ------------ | ---- | -------------------------------- |
| apiid    | int(10)      | 是   | 主键                             |
| name     | varchar(50)  | 是   | api名称                          |
| url      | varchar(255) | 是   | url                              |
| protocol | varchar(10)  | 是   | HTTP/HTTPS协议；HTTPS; HTTP;     |
| method   | varchar(10)  | 是   | 请求类型；POST; GET; PUT; DELETE |
| ordernum | int          | 是   | 排序号                           |

#### t_role_act 操作权限表

| 字段名 | 类型    | 必填 | 备注           |
| ------ | ------- | ---- | -------------- |
| ractid | int(10) | 是   | 主键           |
| actid  | int(10) | 是   | 操作表关联主键 |
| rid    | int(10) | 是   | 角色表关联主键 |

#### t_act_api 操作接口关联表

| 字段名 | 类型    | 必填 | 备注           |
| ------ | ------- | ---- | -------------- |
| aaid   | int(10) | 是   | 主键           |
| actid  | int(10) | 是   | 操作表关联主键 |
| apiid  | int(10) | 是   | 接口表关联主键 |

